(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{Pasi:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.SendCode=void 0,a("+L6B");var r=l(a("2/Rp")),o=l(a("qIgq")),i=l(a("Y/ft")),u=n(a("q1tI")),d=a("c+yx"),s=function(e){var t=null,a=0,n=e.second,l=e.initText,s=e.runText,f=e.resetText,c=e.onCaptcha,p=e.storageKey,g=e.onEnd,m=(0,i.default)(e,["second","initText","runText","resetText","onCaptcha","storageKey","onEnd"]),v=(0,u.useState)(l),y=(0,o.default)(v,2),h=y[0],E=y[1],C=(0,u.useState)(!1),b=(0,o.default)(C,2),w=b[0],x=b[1],T=(0,u.useState)(n),_=(0,o.default)(T,1),M=_[0],P=(0,u.useState)(!1),S=(0,o.default)(P,2),q=S[0],L=S[1];function I(e){e.preventDefault(),L(!0);var t=c?c():null;(0,d.isPromise)(t)?t.then(function(){L(!1),O()}).catch(function(){L(!1),console.log("\u83b7\u53d6\u9a8c\u8bc1\u7801\u5931\u8d25")}):t&&(L(!1),O())}function D(e){return s.replace(/\{([^{]*?)%s(.*?)\}/g,e.toString())}function O(){x(!0);var e=a||M;if(p){var n=(new Date).getTime()+1e3*e;sessionStorage.setItem(p,n.toString())}a||E(D(e)),t=setInterval(function(){e--,E(D(e)),e<=0&&j()},1e3)}function j(){E(f),x(!1),t&&clearInterval(t),p&&sessionStorage.removeItem(p),g&&g()}return(0,u.useEffect)(function(){var e=sessionStorage.getItem(p);if(p&&e){var n=~~((Number(e)-(new Date).getTime())/1e3);n>0&&(a=n,E(D(n)),O())}return function(){t&&clearInterval(t)}},[]),u.default.createElement(r.default,Object.assign({},m,{onClick:I,loading:q,disabled:w}),h)};t.SendCode=s,s.defaultProps={second:60,initText:"\u83b7\u53d6\u9a8c\u8bc1\u7801",runText:"{%s}\u79d2\u540e\u91cd\u65b0\u83b7\u53d6",resetText:"\u91cd\u65b0\u83b7\u53d6\u9a8c\u8bc1\u7801"}},WxbV:function(e,t,a){},"c+yx":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrl=l,t.isPromise=r,t.urlRegexp=void 0;var n=/(((^https?:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+(?::\d+)?|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)$/;function l(e){return n.test(e)}function r(e){return!!e&&"function"===typeof e.then}t.urlRegexp=n},g00D:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var l=n(a("2/Rp"));a("Pwec");var r=n(a("CtXQ"));a("5NDa");var o=n(a("5rEg")),i=n(a("p0pE"));a("y8nQ");var u=n(a("Vl3Y")),d=n(a("q1tI")),s=a("Y2fQ"),f=a("ioru"),c=u.default.Item,p=function(e){var t=e.prefixCls,a=e.loading,n=e.onLogin,p=e.onChangeType,g=e.form,m=g.validateFields,v=g.getFieldDecorator,y="password",h=function(e){e.preventDefault(),m(function(e,t){e&&n&&n((0,i.default)({},t,{type:y}))})},E=function(){p&&p(y)};return d.default.createElement(u.default,{onSubmit:h},d.default.createElement(c,null,v("mobile",{rules:[{required:!0,message:(0,s.formatMessage)({id:"validation.mobile.required"})}]})(d.default.createElement(o.default,{size:"large",prefix:d.default.createElement(r.default,{type:"mobile"}),placeholder:"".concat((0,s.formatMessage)({id:"app.login.mobile"}))}))),d.default.createElement(c,null,v("code",{rules:[{required:!0,message:(0,s.formatMessage)({id:"validation.verification-code.required"})}]})(d.default.createElement(o.default,{size:"large",autoComplete:"off",maxLength:6,placeholder:"".concat((0,s.formatMessage)({id:"app.login.verification-code"})),suffix:d.default.createElement(f.SendCode,{className:"verification-code-button"})}))),d.default.createElement(c,null,d.default.createElement(l.default,{loading:a,type:"primary",htmlType:"submit",size:"large",block:!0},d.default.createElement(s.FormattedMessage,{id:"app.login.login"})),d.default.createElement("div",{className:"".concat(t,"__switch")},d.default.createElement("span",{onClick:E},d.default.createElement(s.FormattedMessage,{id:"app.login.login-type-password"})))))};p.defaultProps={loading:!1};var g=u.default.create()(p);t.default=g},gRjX:function(e,t,a){"use strict";var n=a("tAuX"),l=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=l(a("2Taf")),o=l(a("vZ4D")),i=l(a("l4Ni")),u=l(a("ujKo")),d=l(a("MhPg")),s=n(a("mrSG")),f=l(a("q1tI")),c=a("MuoO"),p=l(a("je13")),g=a("LeJ0"),m=l(a("qC21")),v=l(a("g00D"));a("WxbV");var y=function(e){function t(){var e;return(0,r.default)(this,t),e=(0,i.default)(this,(0,u.default)(t).apply(this,arguments)),e.handleLogin=function(t){var a=e.props.dispatch;a({type:"login/fetchLogin",payload:t})},e.handleChangeType=function(t){var a=e.props.dispatch,n=g.STORAGE_KEY_DEFAULT_CONFIG.loginType;p.default.set(n,t),a({type:"login/changeLoginType",payload:t})},e}return(0,d.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.prefixCls,a=e.loginType,n=e.loading;return f.default.createElement("div",{className:t},"password"===a&&f.default.createElement(m.default,{prefixCls:t,loading:n,onLogin:this.handleLogin,onChangeType:this.handleChangeType}),"sms"===a&&f.default.createElement(v.default,{prefixCls:t,loading:n,onLogin:this.handleLogin,onChangeType:this.handleChangeType}))}}]),t}(f.default.Component);y.defaultProps={prefixCls:"user-login"},y=s.__decorate([(0,c.connect)(function(e){var t=e.loading,a=e.login;return{loginType:a.type,loading:t.effects["login/fetchLogin"]}})],y);var h=y;t.default=h},ioru:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"SendCode",{enumerable:!0,get:function(){return n.SendCode}});var n=a("Pasi")},qC21:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("+L6B");var l=n(a("2/Rp"));a("Pwec");var r=n(a("CtXQ"));a("5NDa");var o=n(a("5rEg")),i=n(a("p0pE"));a("y8nQ");var u=n(a("Vl3Y")),d=n(a("q1tI")),s=n(a("mOP9")),f=a("Y2fQ"),c=u.default.Item,p=function(e){var t=e.prefixCls,a=e.loading,n=e.onLogin,p=e.onChangeType,g=e.form,m=g.validateFields,v=g.getFieldDecorator,y=function(e){e.preventDefault(),m(function(e,t){e||n&&n((0,i.default)({},t,{type:"password"}))})},h=function(){p&&p("sms")};return d.default.createElement(u.default,{onSubmit:y},d.default.createElement(c,null,v("username",{rules:[{required:!0,message:(0,f.formatMessage)({id:"validation.username.required"})}]})(d.default.createElement(o.default,{size:"large",prefix:d.default.createElement(r.default,{type:"user"}),placeholder:"".concat((0,f.formatMessage)({id:"app.login.username"}))}))),d.default.createElement(c,null,v("password",{rules:[{required:!0,message:(0,f.formatMessage)({id:"validation.password.required"})}]})(d.default.createElement(o.default,{size:"large",prefix:d.default.createElement(r.default,{type:"lock"}),autoComplete:"off",placeholder:"".concat((0,f.formatMessage)({id:"app.login.password"})),suffix:d.default.createElement("span",{className:"forgot-link"},d.default.createElement(s.default,{to:"/user/password-reset"},d.default.createElement(f.FormattedMessage,{id:"app.login.forgot-password"})))}))),d.default.createElement(c,null,d.default.createElement(l.default,{loading:a,type:"primary",htmlType:"submit",size:"large",block:!0},d.default.createElement(f.FormattedMessage,{id:"app.login.login"})),d.default.createElement("div",{className:"".concat(t,"__switch")},d.default.createElement("span",{onClick:h},d.default.createElement(f.FormattedMessage,{id:"app.login.login-type-sms"})))))};p.defaultProps={loading:!1};var g=u.default.create()(p);t.default=g}}]);